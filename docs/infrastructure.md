# Tale - 인프라 & 배포 설계

> 작성일: 2026-02-09
> 대상: 1,000명 SaaS 웹앱 배포 기준

## 목차

1. [전제 조건](#1-전제-조건)
2. [시스템 아키텍처](#2-시스템-아키텍처)
3. [시나리오 A: 외부 API 모델](#3-시나리오-a-외부-api-모델)
4. [시나리오 B: 자체 모델 + IP 보호](#4-시나리오-b-자체-모델--ip-보호)
5. [비용 비교 요약](#5-비용-비교-요약)
6. [보안 아키텍처](#6-보안-아키텍처)
7. [단계별 도입 로드맵](#7-단계별-도입-로드맵)

## 1. 전제 조건

| 항목 | 가정 |
|------|------|
| 등록 사용자 | 1,000명 |
| DAU | 1,000명 |
| 일 영상 생성 | -500-1,500건 |
| 월 영상 생성 | -15,000-45,000건 |
| 영상당 평균 샷 수 | 8개 (8초 × 8 = 1분) |
| 피크 동시 생성 | -50-150건 |

## 2. 시스템 아키텍처

### 공통 구조 (시나리오 A/B 동일)

```
사용자 (브라우저)
       │
       ▼
┌──────────────┐
│  Cloudflare  │  CDN + WAF + DDoS
└──────┬───────┘
       │
  ┌────┴────────────────────┐
  │                         │
┌─▼───────────┐   ┌────────▼────────┐
│ Next.js     │   │  FastAPI         │
│ (프론트엔드) │   │  (API 서버)      │
│ Vercel      │   │  Cloud Run       │
└─────────────┘   └────────┬────────┘
                           │
              ┌────────────┼────────────┐
              │            │            │
     ┌────────▼───┐  ┌────▼─────┐  ┌──▼──────────┐
     │ Supabase   │  │  Redis   │  │ Cloud       │
     │ DB + Auth  │  │  (큐)    │  │ Storage     │
     │ PostgreSQL │  │          │  │ (영상 저장)  │
     └────────────┘  └────┬─────┘  └─────────────┘
                          │
                   ┌──────▼──────┐
                   │   Workers   │  ◀── 여기서부터 A/B 분기
                   └──────┬──────┘
                          │
              ┌───────────┼───────────┐
              │           │           │
           [LLM]     [영상생성]    [이미지생성]
```

**Workers 이후가 시나리오 A와 B의 차이점.**

## 3. 시나리오 A: 외부 API 모델

### 구성

| 역할 | 서비스 | 특징 |
|------|--------|------|
| LLM | Google Gemini API | 씬 분할, 프롬프트 생성 |
| 영상 생성 | Google Veo API | T2V/I2V, 8초 클립 |
| 이미지 생성 | OpenAI DALL-E 3 | 캐릭터 레퍼런스 |

### 장점
- 초기 투자 최소 (GPU 인프라 불필요)
- 최신 모델 바로 사용 가능
- 운영 인력 최소

### 단점
- **사용자 프롬프트/스토리가 외부 API로 전송됨**
- API 제공사의 약관에 따라 학습 데이터로 활용될 가능성
- 영상 생성 단가가 높고, 사용량에 비례하여 비용 증가

### 비용 산정

#### 고정 인프라

| 항목 | 서비스 | 월 비용 |
|------|--------|---------|
| 프론트엔드 | Vercel Pro | $20 |
| API 서버 | Cloud Run | $150-400 |
| 워커 | Cloud Run | $300-800 |
| DB + Auth | Supabase Pro | $25 |
| 작업 큐 | Upstash Redis | $30-80 |
| 스토리지 | GCS | $100-300 |
| CDN + 보안 | Cloudflare Pro | $20 |
| 모니터링 | Sentry + Cloud Monitoring | $50-100 |
| **소계** | | **$700-1,750** |

#### 변동 API 비용

영상 생성 API는 **초당 과금** 구조. 샷 길이에 따라 비용이 크게 변동.

##### 주요 영상 생성 API 초당 단가

| API | 해상도 | 초당 단가 | 8초 x 8샷 (64초) | 출처 |
|-----|--------|----------|-----------------|------|
| Runway Gen-4 Turbo | 720p | $0.05/초 | $3.20 | [Runway Docs](https://docs.dev.runwayml.com/guides/pricing/) |
| Runway Gen-4 | 1080p | $0.10/초 | $6.40 | [Runway Docs](https://docs.dev.runwayml.com/guides/pricing/) |
| Veo 3.1 Fast | 720p | $0.15/초 | $9.60 | [CostGoat](https://costgoat.com/pricing/google-veo) |
| Veo 2 (Gemini API) | 720p | $0.35/초 | $22.40 | [TechCrunch](https://techcrunch.com/2025/02/23/googles-new-ai-video-model-veo-2-will-cost-50-cents-per-second/) |
| Veo 3.1 Standard | 1080p | $0.40/초 | $25.60 | [Vertex AI Pricing](https://cloud.google.com/vertex-ai/generative-ai/pricing) |

##### 샷 길이별 영상 1건 비용 (8샷 기준)

| API | 5초 x 8샷 (40초) | 8초 x 8샷 (64초) | 10초 x 8샷 (80초) |
|-----|-----------------|-----------------|------------------|
| Runway Gen-4 Turbo | $2.00 | $3.20 | $4.00 |
| Veo 3.1 Fast | $6.00 | $9.60 | $12.00 |
| Veo 2 (Gemini API) | $14.00 | $22.40 | $28.00 |
| Veo 3.1 Standard | $16.00 | $25.60 | $32.00 |

##### 기타 API

| API | 영상 1건당 |
|-----|-----------|
| Gemini LLM (씬 분할, 프롬프트) | $0.02-0.20 |
| DALL-E 3 (캐릭터 레퍼런스) | $0.08-0.16 |

#### 시나리오 A 총비용

**A-1: 플랫폼 부담** (API 비용 전액 부담, Veo 3.1 Fast 기준)

| 사용량 | 인프라 | API | **월 합계** |
|--------|--------|-----|------------|
| 5,000건/월 (베타) | $800 | $49,000 | **$50,000** |
| 15,000건/월 | $1,000 | $147,000 | **$148,000** |
| 30,000건/월 | $1,200 | $293,000 | **$294,000** |
| 45,000건/월 | $1,500 | $440,000 | **$442,000** |

**A-2: BYOK** (사용자 API 키 사용)

| 사용량 | 인프라 | API | **월 합계** |
|--------|--------|-----|------------|
| 전 구간 동일 | $700-1,750 | **$0** | **$700-1,750** |

> **BYOK (Bring Your Own Key)**: 사용자가 본인의 API 키로 영상 생성 비용을 직접 부담.
> 플랫폼은 구독료 수익 + 인프라 비용만으로 운영. 사용자 부담: 영상 1건당 $3-32 (API 티어별).
> Vidco, Factory 등 BYOK 기반 영상 생성 플랫폼 다수 운영 중. ([BYOKList](https://byoklist.com/))

## 4. 시나리오 B: 자체 모델 + IP 보호

### 핵심 목표

> 사용자의 스토리/아이디어/캐릭터 설정은 **IP(지적 재산)**이다.
> 외부 API로 전송하지 않고, 자체 인프라에서 처리하여
> 제3자 학습 데이터로 유출되지 않도록 보장한다.

### 모델 구성

| 역할 | 외부 API 대체 | 자체 모델 후보 | GPU 요구 |
|------|-------------|--------------|---------|
| LLM | Gemini → | Llama 3.1 70B / Qwen 2.5 72B | A100 80GB × 1 |
| 영상 생성 | Veo → | CogVideoX-5B / Wan2.1 / HunyuanVideo | A100 80GB × 2-4 |
| 이미지 생성 | DALL-E → | SDXL / Flux.1 | A10G × 1 |

### 인프라 구성

```
┌─────────────────────────────────────────────────────┐
│                   Private VPC (GCP)                  │
│                                                      │
│  ┌──────────────┐  ┌──────────────┐                 │
│  │ API Server   │  │ Redis Queue  │                 │
│  │ Cloud Run    │  │              │                 │
│  └──────┬───────┘  └──────┬───────┘                 │
│         │                  │                         │
│         └────────┬─────────┘                         │
│                  │                                   │
│  ┌───────────────▼───────────────────────────┐      │
│  │         GPU Cluster (GKE)                  │      │
│  │                                            │      │
│  │  ┌──────────┐ ┌──────────┐ ┌──────────┐  │      │
│  │  │ LLM Node │ │ Video    │ │ Image    │  │      │
│  │  │ A100×1   │ │ Gen Node │ │ Gen Node │  │      │
│  │  │ Llama 70B│ │ A100×2-4 │ │ A10G×1   │  │      │
│  │  └──────────┘ │CogVideoX │ │ SDXL     │  │      │
│  │               └──────────┘ └──────────┘  │      │
│  └───────────────────────────────────────────┘      │
│                                                      │
│  ┌──────────────┐  ┌──────────────┐                 │
│  │ Cloud Storage│  │ Supabase     │                 │
│  │ (영상 저장)   │  │ (DB + Auth)  │                 │
│  └──────────────┘  └──────────────┘                 │
│                                                      │
│  ── 외부로 나가는 AI 데이터 없음 ──                    │
└─────────────────────────────────────────────────────┘
```

### IP 보호 보안 절차

#### 데이터 흐름 통제

| 구간 | 보호 조치 |
|------|----------|
| 사용자 → API 서버 | TLS 1.3 암호화 전송 |
| API 서버 → GPU 클러스터 | Private VPC 내부 통신만 허용 (인터넷 차단) |
| GPU → Storage | VPC 내부 + 서비스 계정 인증 |
| Storage → 사용자 | Signed URL (시간 제한 접근) |

#### 모델 운영 보안

| 항목 | 조치 |
|------|------|
| **학습 데이터 격리** | 추론 전용 클러스터와 파인튜닝 클러스터 물리 분리 |
| **모델 가중치 관리** | GCS 암호화 저장 + IAM 접근 제어 |
| **프롬프트 로깅** | 내부 DB에만 저장, 외부 전송 없음 |
| **네트워크 정책** | GPU 노드 → 인터넷 egress 차단 (모델 다운로드 시에만 임시 개방) |
| **감사 로그** | 모든 추론 요청 기록 (누가, 언제, 어떤 프롬프트) |

#### 사용자 IP 보호 등급

| 등급 | 대상 | 보호 수준 |
|------|------|----------|
| Level 1 | 스토리/시나리오 원문 | 암호화 저장 + 접근 로그 + 소유자만 열람 |
| Level 2 | 캐릭터 설정/레퍼런스 | 암호화 저장 + 프로젝트별 격리 |
| Level 3 | 생성된 프롬프트 | 내부 DB 저장, 외부 미전송 |
| Level 4 | 생성된 영상 | Signed URL + 다운로드 워터마크 (선택) |

### 비용 산정

#### GPU 인프라 (GCP 기준, 월 단위)

| 용도 | GPU | 수량 | 시간당 | 월 비용 (24/7) | 월 비용 (12h/일) |
|------|-----|------|--------|---------------|-----------------|
| LLM 추론 | A100 80GB | 2 | $3.67×2 | $5,280 | $2,640 |
| 영상 생성 | A100 80GB | 8 | $3.67×8 | $21,120 | $10,560 |
| 영상 생성 (피크) | A100 80GB | +8 (auto) | $3.67×8 | $4,000 (스팟) | $2,000 |
| 이미지 생성 | A10G | 2 | $1.00×2 | $1,440 | $720 |
| **GPU 소계** | | | | **$31,840** | **$15,920** |

> **스팟/선점형 인스턴스** 활용 시 60-70% 절감 가능
> A100 스팟: $1.10/h (정가의 30%)

#### GPU 비용 최적화 버전

| 전략 | 구성 | 월 비용 |
|------|------|---------|
| 풀 가동 (24/7, 정가) | A100×10 + A10G×2 | $31,840 |
| 업무시간 가동 (12h) | 같은 구성 | $15,920 |
| 스팟 인스턴스 활용 | 영상 생성만 스팟 | $13,000 |
| **추천: 혼합** | LLM 상시 + 영상 스팟 + 오토스케일 | **$12,000-18,000** |

#### 추가 인프라

| 항목 | 서비스 | 월 비용 |
|------|--------|---------|
| GKE 클러스터 관리 | GKE Standard | $150 |
| 네트워크 (VPC, NAT) | GCP Networking | $100-200 |
| 모델 스토리지 | GCS (모델 가중치 -100GB) | $5 |
| Container Registry | Artifact Registry | $20 |
| 시크릿 관리 | Secret Manager | $5 |
| 모니터링 강화 | Cloud Monitoring + Logging | $100-200 |
| **소계** | | **$400-600** |

#### 시나리오 B 총비용

| 항목 | 월 비용 |
|------|---------|
| 공통 인프라 (프론트, DB, CDN 등) | $800 |
| GPU 인프라 (혼합 최적화) | $12,000-18,000 |
| 추가 인프라 (VPC, GKE 등) | $500 |
| 외부 API 비용 | **$0** |
| **합계** | **$13,500-19,500/월** |

> 영상 생성량과 무관한 **고정 비용** 구조.
> 월 15,000건이든 45,000건이든 비용 동일.

## 5. 비용 비교 요약

### 월 사용량별 비교

| 월 생성량 | A-1 (플랫폼부담) | A-2 (BYOK) | B (자체 모델) | 유리한 쪽 |
|----------|----------------|------------|-------------|----------|
| 5,000건 (베타) | $50,000 | $800 | $6,000 | **A-2** (BYOK) |
| 15,000건 | $148,000 | $1,000 | $14,000 | **A-2** (BYOK) |
| 30,000건 | $294,000 | $1,200 | $17,000 | **A-2** (BYOK) |
| 45,000건 | $442,000 | $1,500 | $19,500 | **A-2** (BYOK) |

### 손익분기점

> **BYOK 모델 시 시나리오 A가 압도적으로 저렴** (인프라만 $700-1,750/월).
> 플랫폼 부담 시 시나리오 A는 운영 불가 수준 (Veo Fast 기준 월 $14만+).
> **시나리오 B는 IP 보호가 필수인 경우에만 선택** ($14,000-19,500/월 고정).

### 시나리오별 장단점

| 항목 | A-1: 플랫폼부담 | A-2: BYOK | B: 자체 모델 |
|------|---------------|-----------|-------------|
| 초기 투자 | **낮음** (즉시) | **낮음** (즉시) | 높음 (GPU 2-4주) |
| 영상 품질 | **최상** (Veo) | **최상** (Veo) | 양호 (오픈소스) |
| 비용 구조 | 종량제 (비현실적) | **$700-1,750 고정** | 고정 $14K-19.5K |
| IP 보호 | 취약 | 취약 | **완전 보호** |
| 운영 난이도 | **쉬움** | **쉬움** | 어려움 (MLOps) |
| 수익 모델 | 마진 없음 | **구독료 = 수익** | 구독료 - GPU |
| 모델 업데이트 | **자동** | **자동** | 수동 (직접 교체) |

## 6. 보안 아키텍처

### 공통 (A/B 모두)

| 영역 | 구현 | 비용 |
|------|------|------|
| 인증 | Supabase Auth (JWT + OAuth) | 포함 |
| DB 보안 | Row Level Security (RLS) | 포함 |
| API 보호 | Rate Limiting (사용자별) | Cloudflare 포함 |
| DDoS | Cloudflare DDoS Protection | Free-Pro |
| WAF | Cloudflare WAF | Pro $20/월 |
| HTTPS | TLS 1.3 강제 | 무료 |
| 데이터 암호화 | AES-256 at rest (GCS/Supabase 기본) | 포함 |

### 시나리오 B 추가 보안

| 영역 | 구현 | 비용 |
|------|------|------|
| 네트워크 격리 | Private VPC + VPC Service Controls | $50/월 |
| GPU 노드 격리 | 인터넷 egress 차단 정책 | 포함 |
| 감사 로깅 | Cloud Audit Logs (전 구간) | $30/월 |
| 데이터 유출 방지 | DLP API (프롬프트 스캔) | $20/월 |
| 접근 제어 | IAM + Workload Identity | 포함 |
| 침입 탐지 | Security Command Center | $50/월 (Standard) |
| **추가 보안 소계** | | **$150/월** |

## 7. 단계별 도입 로드맵

### Phase 1: MVP 출시 (시나리오 A)

```
기간: 1-2개월
비용: $500/월 + API 종량제
목표: 빠르게 출시, 사용자 반응 확인
```

- 외부 API (Veo + Gemini) 사용
- 크레딧 시스템으로 생성량 제한 (무료 2건/월, 유료 20건/월)
- Supabase Auth + RLS로 기본 보안
- Cloud Run + Vercel 서버리스 구성

### Phase 2: 수익 검증 (시나리오 A 유지)

```
기간: 3-6개월
비용: $700-1,750/월 (BYOK 기준)
목표: PMF 확인, 과금 모델 검증
```

- BYOK 모델로 운영 (사용자 API 키 사용)
- 유료 플랜 도입 ($15-49/월)
- 사용 패턴 데이터 수집
- 자체 모델 전환 판단 기준 확보:
  - IP 보호 요구하는 B2B 고객 유무
  - BYOK 거부감 있는 사용자 비율
  - B2B 엔터프라이즈 수요 여부

### Phase 3: 자체 모델 전환 (시나리오 B)

```
기간: 7-12개월
비용: $13,500-19,500/월 (고정)
목표: 비용 절감 + IP 보호 + B2B 대응
```

- GPU 클러스터 구축 (GKE + A100)
- 오픈소스 영상 생성 모델 도입
- Private VPC 구성
- B2B 엔터프라이즈 플랜 출시:
  - "귀사의 IP는 외부로 전송되지 않습니다" 보장
  - 감사 로그 제공
  - 전용 테넌트 옵션

### Phase 4: 자체 모델 파인튜닝 (선택)

```
기간: 12개월+
추가 비용: 파인튜닝 클러스터 $2,000-3,000/월 (비상시만 가동)
목표: 독자적 영상 품질, 경쟁 우위
```

- 생성된 영상 데이터로 모델 파인튜닝
- 자체 스타일/품질 차별화
- **주의**: 사용자 데이터 활용 시 명시적 동의 필수 (약관 + opt-in)

## 부록: 자체 모델 후보 비교 (2026-02 기준)

### 영상 생성

| 모델 | 파라미터 | 해상도 | 길이 | GPU 요구 | 품질 |
|------|---------|--------|------|---------|------|
| CogVideoX-5B | 5B | 720p | 6초 | A100×1 | 양호 |
| Wan2.1 14B | 14B | 720p | 5-10초 | A100×2 | 좋음 |
| HunyuanVideo | 13B | 720p-1080p | 5초 | A100×2-4 | 좋음 |

### LLM

| 모델 | 파라미터 | GPU 요구 | 성능 |
|------|---------|---------|------|
| Llama 3.1 8B | 8B | A10G×1 | 기본 (간단한 프롬프트) |
| Llama 3.1 70B | 70B | A100×1 | 좋음 (씬 분할 가능) |
| Qwen 2.5 72B | 72B | A100×1 | 좋음 (다국어 강점) |

### 이미지 생성

| 모델 | GPU 요구 | 속도 | 품질 |
|------|---------|------|------|
| SDXL | A10G×1 | -3초/장 | 양호 |
| Flux.1 | A100×1 | -5초/장 | 좋음 |

## 부록: 전제조건 산출 근거 및 출처

### DAU 1,000명 → 일 500-1,500건 산출 근거

| 사용자 유형 | 비율 | 일 생성량 | 소계 |
|------------|------|----------|------|
| Power User | 20% (200명) | 3-5건 | 600-1,000건 |
| Casual User | 80% (800명) | 0-0.5건 | 0-400건 |
| **합계** | | | **600-1,400건** |

> Tale은 8샷 멀티씬 영상(1분)으로, 5초 단순 클립 대비 생성 빈도가 낮음.
> Pika Labs 벤치마크(일 1.8건/user)에서 복잡도 보정 적용.

### 참고 벤치마크

**영상 생성 플랫폼 사용 패턴**:
- Pika Labs: MAU 12만, 주당 150만+ 비디오 → 사용자당 일 1.8건 ([출처](https://fueler.io/blog/pika-labs-usage-revenue-valuation-growth-statistics))
- Runway ML: 활성일 기준 일 2-4건, 크레딧 제한으로 월 6-12개 ([출처](https://blog.segmind.com/runway-ml-pricing-plans-features/))
- HeyGen: 고객 85,000+, ARR $95M ([출처](https://www.quantumrun.com/consulting/heygen-ai-statistics/))

**SaaS 사용자 행동**:
- Power User 법칙: 20% 사용자가 80% 생성량 차지 ([출처](https://clevertap.com/blog/power-users/))
- 창작 도구 DAU/MAU: 0.3-0.5 (프로젝트 기반 특성) ([출처](https://agencyanalytics.com/kpi-definitions/sessions-per-user))

**GPU 인프라 비용**:
- RunPod A100 80GB: $1.19-1.64/h, 4090: $0.34-0.69/h ([출처](https://www.runpod.io/pricing))
- CogVideoX-5B: A100에서 90초/클립 ([출처](https://github.com/zai-org/CogVideo))
- Wan2.1 720P 5초: 클라우드 $0.30-2.39/건 ([출처](https://www.promptus.ai/blog/wan-2-1-vs-hunyuan-video-ai-comparison-2025))
- HunyuanVideo: 자체 서버 시 한계비용 거의 $0 ([출처](https://medium.com/data-science-in-your-pocket/hunyuanvideo-1-5-ai-video-generation-in-consumer-gpu-a5d431589837))
